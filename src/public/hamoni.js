(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports.Hamoni=t():e.Hamoni=t()})(this,function(){var e=Math.floor,t=String.fromCharCode;return function(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(o,'a',o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=22)}([function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(o){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,o){(function(n){function r(){var e;try{e=t.storage.debug}catch(t){}return!e&&'undefined'!=typeof n&&'env'in n&&(e=n.env.DEBUG),e}t=e.exports=o(26),t.log=function(){return'object'==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var o=this.useColors;if(e[0]=(o?'%c':'')+this.namespace+(o?' %c':' ')+e[0]+(o?'%c ':' ')+'+'+t.humanize(this.diff),!!o){var r='color: '+this.color;e.splice(1,0,r,'color: inherit');var n=0,s=0;e[0].replace(/%[a-zA-Z%]/g,function(e){'%%'===e||(n++,'%c'===e&&(s=n))}),e.splice(s,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem('debug'):t.storage.debug=e}catch(t){}},t.load=r,t.useColors=function(){return'undefined'!=typeof window&&window.process&&'renderer'===window.process.type||'undefined'!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||'undefined'!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||'undefined'!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||'undefined'!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage='undefined'!=typeof chrome&&'undefined'!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),t.colors=['lightseagreen','forestgreen','goldenrod','dodgerblue','darkorchid','crimson'],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return'[UnexpectedJSONParseError]: '+e.message}},t.enable(r())}).call(t,o(25))},function(e){function t(e){if(e)return o(e)}function o(e){for(var o in t.prototype)e[o]=t.prototype[o];return e}e.exports=t;t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks['$'+e]=this._callbacks['$'+e]||[]).push(t),this},t.prototype.once=function(e,t){function o(){this.off(e,o),t.apply(this,arguments)}return o.fn=t,this.on(e,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var o=this._callbacks['$'+e];if(!o)return this;if(1==arguments.length)return delete this._callbacks['$'+e],this;for(var r,n=0;n<o.length;n++)if(r=o[n],r===t||r.fn===t){o.splice(n,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),o=this._callbacks['$'+e];if(o){o=o.slice(0);for(var r=0,n=o.length;r<n;++r)o[r].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks['$'+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,o,r){(function(e){function n(e,t){var r='b'+o.packets[e.type]+e.data.data;return t(r)}function s(e,t,r){if(!t)return o.encodeBase64Packet(e,r);var n=e.data,s=new Uint8Array(n),a=new Uint8Array(1+n.byteLength);a[0]=k[e.type];for(var p=0;p<s.length;p++)a[p+1]=s[p];return r(a.buffer)}function a(e,t,r){if(!t)return o.encodeBase64Packet(e,r);var n=new FileReader;return n.onload=function(){e.data=n.result,o.encodePacket(e,t,!0,r)},n.readAsArrayBuffer(e.data)}function p(e,t,r){if(!t)return o.encodeBase64Packet(e,r);if(b)return a(e,t,r);var n=new Uint8Array(1);n[0]=k[e.type];var s=new T([n.buffer,e.data]);return r(s)}function i(e){try{e=h.decode(e,{strict:!1})}catch(t){return!1}return e}function c(e,t,o){for(var r=Array(e.length),n=f(e.length,o),s=function(e,o,n){t(o,function(t,o){r[e]=o,n(t,r)})},a=0;a<e.length;a++)s(a,e[a],n)}var d,l=r(33),u=r(10),y=r(34),f=r(35),h=r(36);e&&e.ArrayBuffer&&(d=r(38));var m='undefined'!=typeof navigator&&/Android/i.test(navigator.userAgent),g='undefined'!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),b=m||g;o.protocol=3;var k=o.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},x=l(k),_={type:'error',data:'parser error'},T=r(39);o.encodePacket=function(t,o,r,a){'function'==typeof o&&(a=o,o=!1),'function'==typeof r&&(a=r,r=null);var i=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&i instanceof ArrayBuffer)return s(t,o,a);if(T&&i instanceof e.Blob)return p(t,o,a);if(i&&i.base64)return n(t,a);var c=k[t.type];return void 0!==t.data&&(c+=r?h.encode(t.data+'',{strict:!1}):t.data+''),a(''+c)},o.encodeBase64Packet=function(r,n){var s='b'+o.packets[r.type];if(T&&r.data instanceof e.Blob){var a=new FileReader;return a.onload=function(){var e=a.result.split(',')[1];n(s+e)},a.readAsDataURL(r.data)}var p;try{p=t.apply(null,new Uint8Array(r.data))}catch(o){for(var c=new Uint8Array(r.data),d=Array(c.length),l=0;l<c.length;l++)d[l]=c[l];p=t.apply(null,d)}return s+=e.btoa(p),n(s)},o.decodePacket=function(e,t,r){if(void 0===e)return _;if('string'==typeof e){if('b'===e.charAt(0))return o.decodeBase64Packet(e.substr(1),t);if(r&&(e=i(e),!1===e))return _;var n=e.charAt(0);return+n==n&&x[n]?1<e.length?{type:x[n],data:e.substring(1)}:{type:x[n]}:_}var s=new Uint8Array(e),n=s[0],a=y(e,1);return T&&'blob'===t&&(a=new T([a])),{type:x[n],data:a}},o.decodeBase64Packet=function(e,t){var o=x[e.charAt(0)];if(!d)return{type:o,data:{base64:!0,data:e.substr(1)}};var r=d.decode(e.substr(1));return'blob'===t&&T&&(r=new T([r])),{type:o,data:r}},o.encodePayload=function(e,t,r){function n(e){return e.length+':'+e}'function'==typeof t&&(r=t,t=null);var s=u(e);return t&&s?T&&!b?o.encodePayloadAsBlob(e,r):o.encodePayloadAsArrayBuffer(e,r):e.length?void c(e,function(e,r){o.encodePacket(e,!!s&&t,!1,function(e){r(null,n(e))})},function(e,t){return r(t.join(''))}):r('0:')},o.decodePayload=function(e,t,r){if('string'!=typeof e)return o.decodePayloadAsBinary(e,t,r);'function'==typeof t&&(r=t,t=null);var s;if(''===e)return r(_,0,1);for(var a,n,p,c='',d=0,i=e.length;d<i;d++){if(p=e.charAt(d),':'!==p){c+=p;continue}if(''===c||c!=(a=+c))return r(_,0,1);if(n=e.substr(d+1,a),c!=n.length)return r(_,0,1);if(n.length){if(s=o.decodePacket(n,t,!1),_.type===s.type&&_.data===s.data)return r(_,0,1);var l=r(s,d+a,i);if(!1===l)return}d+=a,c=''}if(''!==c)return r(_,0,1)},o.encodePayloadAsArrayBuffer=function(e,t){return e.length?void c(e,function(e,t){o.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,o){var r=o.reduce(function(e,t){var o;return o='string'==typeof t?t.length:t.byteLength,e+o.toString().length+o+2},0),n=new Uint8Array(r),s=0;return o.forEach(function(e){var t='string'==typeof e,o=e;if(t){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);o=r.buffer}n[s++]=t?0:1;for(var i=o.byteLength.toString(),a=0;a<i.length;a++)n[s++]=parseInt(i[a]);n[s++]=255;for(var r=new Uint8Array(o),a=0;a<r.length;a++)n[s++]=r[a]}),t(n.buffer)}):t(new ArrayBuffer(0))},o.encodePayloadAsBlob=function(e,t){c(e,function(e,t){o.encodePacket(e,!0,!0,function(e){var o=new Uint8Array(1);if(o[0]=1,'string'==typeof e){for(var r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);e=r.buffer,o[0]=0}for(var s=e instanceof ArrayBuffer?e.byteLength:e.size,a=s.toString(),p=new Uint8Array(a.length+1),n=0;n<a.length;n++)p[n]=parseInt(a[n]);if(p[a.length]=255,T){var i=new T([o.buffer,p.buffer,e]);t(null,i)}})},function(e,o){return t(new T(o))})},o.decodePayloadAsBinary=function(e,r,n){'function'==typeof r&&(n=r,r=null);for(var s=e,a=[];0<s.byteLength;){for(var p=new Uint8Array(s),c=0===p[0],d='',l=1;;l++){if(255===p[l])break;if(310<d.length)return n(_,0,1);d+=p[l]}s=y(s,2+d.length),d=parseInt(d);var i=y(s,0,d);if(c)try{i=t.apply(null,new Uint8Array(i))}catch(o){var u=new Uint8Array(i);i='';for(var l=0;l<u.length;l++)i+=t(u[l])}a.push(i),s=y(s,d)}var f=a.length;a.forEach(function(e,t){n(o.decodePacket(e,r,!0),t,f)})}}).call(o,r(0))},function(e,t){t.encode=function(e){var t='';for(var o in e)e.hasOwnProperty(o)&&(t.length&&(t+='&'),t+=encodeURIComponent(o)+'='+encodeURIComponent(e[o]));return t},t.decode=function(e){for(var t,o={},r=e.split('&'),n=0,s=r.length;n<s;n++)t=r[n].split('='),o[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return o}},function(e){e.exports=function(e,t){var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}},function(e,t,o){function r(){}function n(e){var o=''+e.type;return(t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)&&(o+=e.attachments+'-'),e.nsp&&'/'!==e.nsp&&(o+=e.nsp+','),null!=e.id&&(o+=e.id),null!=e.data&&(o+=JSON.stringify(e.data)),u('encoded %j as %s',e,o),o}function s(e,t){f.removeBlobs(e,function(e){var o=f.deconstructPacket(e),r=n(o.packet),s=o.buffers;s.unshift(r),t(s)})}function a(){this.reconstructor=null}function p(e){var o=0,r={type:+e.charAt(0)};if(null==t.types[r.type])return l();if(t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type){for(var n='';'-'!==e.charAt(++o)&&(n+=e.charAt(o),o!=e.length););if(n!=+n||'-'!==e.charAt(o))throw new Error('Illegal attachments');r.attachments=+n}if('/'===e.charAt(o+1))for(r.nsp='';++o;){var s=e.charAt(o);if(','===s)break;if(r.nsp+=s,o===e.length)break}else r.nsp='/';var a=e.charAt(o+1);if(''!==a&&+a==a){for(r.id='';++o;){var s=e.charAt(o);if(null==s||+s!=s){--o;break}if(r.id+=e.charAt(o),o===e.length)break}r.id=+r.id}return e.charAt(++o)&&(r=d(r,e.substr(o))),u('decoded %s as %j',e,r),r}function d(e,t){try{e.data=JSON.parse(t)}catch(t){return l()}return e}function i(e){this.reconPack=e,this.buffers=[]}function l(){return{type:t.ERROR,data:'parser error'}}var u=o(1)('socket.io-parser'),c=o(2),y=o(10),f=o(28),h=o(12);t.protocol=4,t.types=['CONNECT','DISCONNECT','EVENT','ACK','ERROR','BINARY_EVENT','BINARY_ACK'],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=r,t.Decoder=a,r.prototype.encode=function(e,o){if((e.type===t.EVENT||e.type===t.ACK)&&y(e.data)&&(e.type=e.type===t.EVENT?t.BINARY_EVENT:t.BINARY_ACK),u('encoding packet %j',e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)s(e,o);else{var r=n(e);o([r])}},c(a.prototype),a.prototype.add=function(e){var o;if('string'==typeof e)o=p(e),t.BINARY_EVENT===o.type||t.BINARY_ACK===o.type?(this.reconstructor=new i(o),0===this.reconstructor.reconPack.attachments&&this.emit('decoded',o)):this.emit('decoded',o);else if(!(h(e)||e.base64))throw new Error('Unknown type: '+e);else if(!this.reconstructor)throw new Error('got binary data when not reconstructing a packet');else o=this.reconstructor.takeBinaryData(e),o&&(this.reconstructor=null,this.emit('decoded',o))},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},i.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=f.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},i.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,o){(function(t){var r=o(31);e.exports=function(e){var o=e.xdomain,n=e.xscheme,s=e.enablesXDR;try{if('undefined'!=typeof XMLHttpRequest&&(!o||r))return new XMLHttpRequest}catch(t){}try{if('undefined'!=typeof XDomainRequest&&!n&&s)return new XDomainRequest}catch(t){}if(!o)try{return new t[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP')}catch(t){}}}).call(t,o(0))},function(e,t,o){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState='',this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var n=o(3),s=o(2);e.exports=r,s(r.prototype),r.prototype.onError=function(e,t){var o=new Error(e);return o.type='TransportError',o.description=t,this.emit('error',o),this},r.prototype.open=function(){return('closed'===this.readyState||''===this.readyState)&&(this.readyState='opening',this.doOpen()),this},r.prototype.close=function(){return('opening'===this.readyState||'open'===this.readyState)&&(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if('open'===this.readyState)this.write(e);else throw new Error('Transport not open')},r.prototype.onOpen=function(){this.readyState='open',this.writable=!0,this.emit('open')},r.prototype.onData=function(e){var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit('packet',e)},r.prototype.onClose=function(){this.readyState='closed',this.emit('close')}},function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','anchor'];e.exports=function(r){var n=r,s=r.indexOf('['),a=r.indexOf(']');-1!=s&&-1!=a&&(r=r.substring(0,s)+r.substring(s,a).replace(/:/g,';')+r.substring(a,r.length));for(var e=t.exec(r||''),p={},c=14;c--;)p[o[c]]=e[c]||'';return-1!=s&&-1!=a&&(p.source=n,p.host=p.host.substring(1,p.host.length-1).replace(/;/g,':'),p.authority=p.authority.replace('[','').replace(']','').replace(/;/g,':'),p.ipv6uri=!0),p}},function(e,t,o){(function(t){function r(e){if(!e||'object'!=typeof e)return!1;if(n(e)){for(var o=0,s=e.length;o<s;o++)if(r(e[o]))return!0;return!1}if('function'==typeof t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(e)||'function'==typeof t.ArrayBuffer&&e instanceof ArrayBuffer||a&&e instanceof Blob||p&&e instanceof File)return!0;if(e.toJSON&&'function'==typeof e.toJSON&&1===arguments.length)return r(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&r(e[i]))return!0;return!1}var n=o(11),s=Object.prototype.toString,a='function'==typeof t.Blob||'[object BlobConstructor]'===s.call(t.Blob),p='function'==typeof t.File||'[object FileConstructor]'===s.call(t.File);e.exports=r}).call(t,o(0))},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return'[object Array]'==t.call(e)}},function(e,t,o){(function(t){e.exports=function(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}}).call(t,o(0))},function(e,t,o){function r(e,t){if(!(this instanceof r))return new r(e,t);e&&'object'==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||'/socket.io',this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||Infinity),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||0.5),this.backoff=new u({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState='closed',this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var o=t.parser||p;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var n=o(29),s=o(18),a=o(2),p=o(6),i=o(19),c=o(20),d=o(1)('socket.io-client:manager'),l=o(17),u=o(44),y=Object.prototype.hasOwnProperty;e.exports=r,r.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)y.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},r.prototype.updateSocketIds=function(){for(var e in this.nsps)y.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},r.prototype.generateId=function(e){return('/'===e?'':e+'#')+this.engine.id},a(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(e){if(d('readyState %s',this.readyState),~this.readyState.indexOf('open'))return this;d('opening %s',this.uri),this.engine=n(this.uri,this.opts);var t=this.engine,o=this;this.readyState='opening',this.skipReconnect=!1;var r=i(t,'open',function(){o.onopen(),e&&e()}),s=i(t,'error',function(t){if(d('connect_error'),o.cleanup(),o.readyState='closed',o.emitAll('connect_error',t),e){var r=new Error('Connection error');r.data=t,e(r)}else o.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;d('connect attempt will timeout after %d',a);var p=setTimeout(function(){d('connect attempt timed out after %d',a),r.destroy(),t.close(),t.emit('error','timeout'),o.emitAll('connect_timeout',a)},a);this.subs.push({destroy:function(){clearTimeout(p)}})}return this.subs.push(r),this.subs.push(s),this},r.prototype.onopen=function(){d('open'),this.cleanup(),this.readyState='open',this.emit('open');var e=this.engine;this.subs.push(i(e,'data',c(this,'ondata'))),this.subs.push(i(e,'ping',c(this,'onping'))),this.subs.push(i(e,'pong',c(this,'onpong'))),this.subs.push(i(e,'error',c(this,'onerror'))),this.subs.push(i(e,'close',c(this,'onclose'))),this.subs.push(i(this.decoder,'decoded',c(this,'ondecoded')))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll('ping')},r.prototype.onpong=function(){this.emitAll('pong',new Date-this.lastPing)},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit('packet',e)},r.prototype.onerror=function(e){d('error',e),this.emitAll('error',e)},r.prototype.socket=function(e,t){function o(){~l(n.connecting,r)||n.connecting.push(r)}var r=this.nsps[e];if(!r){r=new s(this,e,t),this.nsps[e]=r;var n=this;r.on('connecting',o),r.on('connect',function(){r.id=n.generateId(e)}),this.autoConnect&&o()}return r},r.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1);this.connecting.length||this.close()},r.prototype.packet=function(e){d('writing packet %j',e);var t=this;e.query&&0===e.type&&(e.nsp+='?'+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(o){for(var r=0;r<o.length;r++)t.engine.write(o[r],e.options);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){d('cleanup');for(var e,t=this.subs.length,o=0;o<t;o++)e=this.subs.shift(),e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){d('disconnect'),this.skipReconnect=!0,this.reconnecting=!1,'opening'===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState='closed',this.engine&&this.engine.close()},r.prototype.onclose=function(e){d('onclose'),this.cleanup(),this.backoff.reset(),this.readyState='closed',this.emit('close',e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)d('reconnect failed'),this.backoff.reset(),this.emitAll('reconnect_failed'),this.reconnecting=!1;else{var t=this.backoff.duration();d('will wait %dms before reconnect attempt',t),this.reconnecting=!0;var o=setTimeout(function(){e.skipReconnect||(d('attempting reconnect'),e.emitAll('reconnect_attempt',e.backoff.attempts),e.emitAll('reconnecting',e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(d('reconnect attempt error'),e.reconnecting=!1,e.reconnect(),e.emitAll('reconnect_error',t.data)):(d('reconnect success'),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(o)}})}},r.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll('reconnect',e)}},function(e,t,o){(function(e){var r=o(7),n=o(32),s=o(40),a=o(41);t.polling=function(t){var o,a=!1,p=!1,i=!1!==t.jsonp;if(e.location){var c='https:'===location.protocol,d=location.port;d||(d=c?443:80),a=t.hostname!==location.hostname||d!==t.port,p=t.secure!==c}if(t.xdomain=a,t.xscheme=p,o=new r(t),'open'in o&&!t.forceJSONP)return new n(t);if(!i)throw new Error('JSONP disabled');return new s(t)},t.websocket=a}).call(t,o(0))},function(e,t,o){function r(e){var t=e&&e.forceBase64;(!d||t)&&(this.supportsBinary=!1),n.call(this,e)}var n=o(8),s=o(4),a=o(3),p=o(5),i=o(16),c=o(1)('engine.io-client:polling');e.exports=r;var d=function(){var e=o(7),t=new e({xdomain:!1});return null!=t.responseType}();p(r,n),r.prototype.name='polling',r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){c('paused'),o.readyState='paused',e()}var o=this;if(this.readyState='pausing',this.polling||!this.writable){var r=0;this.polling&&(c('we are currently polling - waiting to pause'),r++,this.once('pollComplete',function(){c('pre-pause polling complete'),--r||t()})),this.writable||(c('we are currently writing - waiting to pause'),r++,this.once('drain',function(){c('pre-pause writing complete'),--r||t()}))}else t()},r.prototype.poll=function(){c('polling'),this.polling=!0,this.doPoll(),this.emit('poll')},r.prototype.onData=function(e){var t=this;c('polling got data %s',e);a.decodePayload(e,this.socket.binaryType,function(e){return'opening'===t.readyState&&t.onOpen(),'close'===e.type?(t.onClose(),!1):void t.onPacket(e)}),'closed'!==this.readyState&&(this.polling=!1,this.emit('pollComplete'),'open'===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){c('writing close packet'),t.write([{type:'close'}])}var t=this;'open'===this.readyState?(c('transport open - closing'),e()):(c('transport not open - deferring close'),this.once('open',e))},r.prototype.write=function(e){var t=this;this.writable=!1;var o=function(){t.writable=!0,t.emit('drain')};a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,o)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?'https':'http',o='';!1!==this.timestampRequests&&(e[this.timestampParam]=i()),this.supportsBinary||e.sid||(e.b64=1),e=s.encode(e),this.port&&('https'==t&&443!==+this.port||'http'==t&&80!==+this.port)&&(o=':'+this.port),e.length&&(e='?'+e);var r=-1!==this.hostname.indexOf(':');return t+'://'+(r?'['+this.hostname+']':this.hostname)+o+this.path+e}},function(t){'use strict';function o(t){var o='';do o=s[t%a]+o,t=e(t/a);while(0<t);return o}function r(){var e=o(+new Date);return e===n?e+'.'+o(c++):(c=0,n=e)}for(var n,s=['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','-','_'],a=64,p={},c=0,d=0;d<a;d++)p[s[d]]=d;r.encode=o,r.decode=function(e){var t=0;for(d=0;d<e.length;d++)t=t*a+p[e.charAt(d)];return t},t.exports=r},function(e){var t=[].indexOf;e.exports=function(e,o){if(t)return e.indexOf(o);for(var r=0;r<e.length;++r)if(e[r]===o)return r;return-1}},function(e,t,o){function r(e,t,o){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,o&&o.query&&(this.query=o.query),this.io.autoConnect&&this.open()}var n=o(6),s=o(2),a=o(43),p=o(19),i=o(20),c=o(1)('socket.io-client:socket'),d=o(4);e.exports=t=r;var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},u=s.prototype.emit;s(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[p(e,'open',i(this,'onopen')),p(e,'packet',i(this,'onpacket')),p(e,'close',i(this,'onclose'))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),'open'===this.io.readyState&&this.onopen(),this.emit('connecting'),this)},r.prototype.send=function(){var e=a(arguments);return e.unshift('message'),this.emit.apply(this,e),this},r.prototype.emit=function(e){if(l.hasOwnProperty(e))return u.apply(this,arguments),this;var t=a(arguments),o={type:n.EVENT,data:t};return o.options={},o.options.compress=!this.flags||!1!==this.flags.compress,'function'==typeof t[t.length-1]&&(c('emitting packet with ack id %d',this.ids),this.acks[this.ids]=t.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),delete this.flags,this},r.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},r.prototype.onopen=function(){if(c('transport is open - connecting'),'/'!==this.nsp)if(this.query){var e='object'==typeof this.query?d.encode(this.query):this.query;c('sending connect packet with query %s',e),this.packet({type:n.CONNECT,query:e})}else this.packet({type:n.CONNECT})},r.prototype.onclose=function(e){c('close (%s)',e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit('disconnect',e)},r.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:this.onevent(e);break;case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:this.onack(e);break;case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit('error',e.data);}},r.prototype.onevent=function(e){var t=e.data||[];c('emitting event %j',t),null!=e.id&&(c('attaching ack callback to event'),t.push(this.ack(e.id))),this.connected?u.apply(this,t):this.receiveBuffer.push(t)},r.prototype.ack=function(e){var t=this,o=!1;return function(){if(!o){o=!0;var r=a(arguments);c('sending ack %j',r),t.packet({type:n.ACK,id:e,data:r})}}},r.prototype.onack=function(e){var t=this.acks[e.id];'function'==typeof t?(c('calling ack %s with %j',e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c('bad ack %s',e.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit('connect'),this.emitBuffered()},r.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)u.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){c('server disconnect (%s)',this.nsp),this.destroy(),this.onclose('io server disconnect')},r.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(c('performing disconnect (%s)',this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose('io client disconnect'),this},r.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e){e.exports=function(e,t,o){return e.on(t,o),{destroy:function(){e.removeListener(t,o)}}}},function(e){var t=[].slice;e.exports=function(e,o){if('string'==typeof o&&(o=e[o]),'function'!=typeof o)throw new Error('bind() requires a function');var r=t.call(arguments,2);return function(){return o.apply(e,r.concat(t.call(arguments)))}}},function(e){'use strict';e.exports=function(e){return null!==e&&'object'==typeof e}},function(e,t,o){const r=o(23),n=o(45),s=o(50),a='http://localhost:3000';e.exports=class{constructor(e,t){this.appId=e,this.userIdentity=t,this.io=r(a,{query:{appId:this.appId,identity:this.userIdentity}}),this.io.on('connect',()=>{console.log('connected succesfully'),this.onReadyCallback()}),this.io.on('connect_error',()=>console.log('error connecting')),this.io.on('error',(e)=>{console.log('error occured'),console.log(e)})}getUsers(){n.get(a+'/users').query({appId:this.appId,identity:this.userIdentity}).end((e,t)=>{if(e)throw console.log(e),e;return console.log('users are: '),console.log(t.body),JSON.parse(t.body)})}connectWithUser(e,t,o){console.log('calling connectWithUser');let r=`connect-with-user-${this.appId}-${this.io.id}`,n=`connect-with-user-${this.appId}-${this.io.id}-${e}-error`,a=`connected-with-user-${this.appId}-${this.io.id}-${e}`;this.io.emit(r,e),this.io.on(n,o),this.io.on(a,(o)=>{let r=new s(this.io,this.appId,this.userIdentity,e,o);t(r),console.log('connected with user succesfully')})}ready(e){this.onReadyCallback=e}}},function(e,t,o){function r(e,t){'object'==typeof e&&(t=e,e=void 0),t=t||{};var o,r=n(e),s=r.source,c=r.id,d=r.path,l=i[c]&&d in i[c].nsps,u=t.forceNew||t['force new connection']||!1===t.multiplex||l;return u?(p('ignoring socket cache for %s',s),o=a(s,t)):(!i[c]&&(p('new io instance for %s',s),i[c]=a(s,t)),o=i[c]),r.query&&!t.query&&(t.query=r.query),o.socket(r.path,t)}var n=o(24),s=o(6),a=o(13),p=o(1)('socket.io-client');e.exports=t=r;var i=t.managers={};t.protocol=s.protocol,t.connect=r,t.Manager=o(13),t.Socket=o(18)},function(e,t,o){(function(t){var r=o(9),n=o(1)('socket.io-client:url');e.exports=function(e,o){var s=e;o=o||t.location,null==e&&(e=o.protocol+'//'+o.host),'string'==typeof e&&('/'===e.charAt(0)&&('/'===e.charAt(1)?e=o.protocol+e:e=o.host+e),!/^(https?|wss?):\/\//.test(e)&&(n('protocol-less url %s',e),e='undefined'==typeof o?'https://'+e:o.protocol+'//'+e),n('parse %s',e),s=r(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port='80':/^(http|ws)s$/.test(s.protocol)&&(s.port='443')),s.path=s.path||'/';var a=-1!==s.host.indexOf(':'),p=a?'['+s.host+']':s.host;return s.id=s.protocol+'://'+p+':'+s.port,s.href=s.protocol+'://'+p+(o&&o.port===s.port?'':':'+s.port),s}}).call(t,o(0))},function(e){function t(){throw new Error('setTimeout has not been defined')}function o(){throw new Error('clearTimeout has not been defined')}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function n(e){if(d===clearTimeout)return clearTimeout(e);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){f&&u&&(f=!1,u.length?y=u.concat(y):h=-1,y.length&&a())}function a(){if(!f){var e=r(s);f=!0;for(var t=y.length;t;){for(u=y,y=[];++h<t;)u&&u[h].run();h=-1,t=y.length}u=null,f=!1,n(e)}}function p(e,t){this.fun=e,this.array=t}function i(){}var c,d,l=e.exports={};(function(){try{c='function'==typeof setTimeout?setTimeout:t}catch(o){c=t}try{d='function'==typeof clearTimeout?clearTimeout:o}catch(t){d=o}})();var u,y=[],f=!1,h=-1;l.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];y.push(new p(e,t)),1!==y.length||f||r(a)},p.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}},function(e,t,o){function r(e){var o,r=0;for(o in e)r=(r<<5)-r+e.charCodeAt(o),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function n(e){function o(){if(o.enabled){var e=o,r=+new Date,n=r-(s||r);e.diff=n,e.prev=s,e.curr=r,s=r;for(var a=Array(arguments.length),p=0;p<a.length;p++)a[p]=arguments[p];a[0]=t.coerce(a[0]),'string'!=typeof a[0]&&a.unshift('%O');var i=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(o,r){if('%%'===o)return o;i++;var n=t.formatters[r];if('function'==typeof n){var s=a[i];o=n.call(e,s),a.splice(i,1),i--}return o}),t.formatArgs.call(e,a);var c=o.log||t.log||console.log.bind(console);c.apply(e,a)}}return o.namespace=e,o.enabled=t.enabled(e),o.useColors=t.useColors(),o.color=r(e),'function'==typeof t.init&&t.init(o),o}t=e.exports=n.debug=n['default']=n,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable('')},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var o=('string'==typeof e?e:'').split(/[\s,]+/),r=o.length,n=0;n<r;n++)o[n]&&(e=o[n].replace(/\*/g,'.*?'),'-'===e[0]?t.skips.push(new RegExp('^'+e.substr(1)+'$')):t.names.push(new RegExp('^'+e+'$')))},t.enabled=function(e){var o,r;for(o=0,r=t.skips.length;o<r;o++)if(t.skips[o].test(e))return!1;for(o=0,r=t.names.length;o<r;o++)if(t.names[o].test(e))return!0;return!1},t.humanize=o(27),t.names=[],t.skips=[],t.formatters={};var s},function(t){function o(e){if(e+='',!(100<e.length)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]),r=(t[2]||'ms').toLowerCase();return'years'===r||'year'===r||'yrs'===r||'yr'===r||'y'===r?o*d:'days'===r||'day'===r||'d'===r?o*c:'hours'===r||'hour'===r||'hrs'===r||'hr'===r||'h'===r?o*i:'minutes'===r||'minute'===r||'mins'===r||'min'===r||'m'===r?o*s:'seconds'===r||'second'===r||'secs'===r||'sec'===r||'s'===r?o*p:'milliseconds'===r||'millisecond'===r||'msecs'===r||'msec'===r||'ms'===r?o:void 0}}}function r(e){var t=Math.round;return e>=c?t(e/c)+'d':e>=i?t(e/i)+'h':e>=s?t(e/s)+'m':e>=p?t(e/p)+'s':e+'ms'}function n(e){return a(e,c,'day')||a(e,i,'hour')||a(e,s,'minute')||a(e,p,'second')||e+' ms'}function a(t,o,r){return t<o?void 0:t<1.5*o?e(t/o)+' '+r:Math.ceil(t/o)+' '+r+'s'}var p=1e3,s=60*p,i=60*s,c=24*i,d=365.25*c;t.exports=function(e,t){t=t||{};var s=typeof e;if('string'==s&&0<e.length)return o(e);if('number'==s&&!1===isNaN(e))return t.long?n(e):r(e);throw new Error('val is not a non-empty string or a valid number. val='+JSON.stringify(e))}},function(e,t,o){(function(e){function r(e,t){if(!e)return e;if(a(e)){var o={_placeholder:!0,num:t.length};return t.push(e),o}if(s(e)){for(var n=Array(e.length),p=0;p<e.length;p++)n[p]=r(e[p],t);return n}if('object'==typeof e&&!(e instanceof Date)){var n={};for(var i in e)n[i]=r(e[i],t);return n}return e}function n(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(s(e))for(var o=0;o<e.length;o++)e[o]=n(e[o],t);else if('object'==typeof e)for(var r in e)e[r]=n(e[r],t);return e}var s=o(11),a=o(12),p=Object.prototype.toString,c='function'==typeof e.Blob||'[object BlobConstructor]'===p.call(e.Blob),d='function'==typeof e.File||'[object FileConstructor]'===p.call(e.File);t.deconstructPacket=function(e){var t=[],o=e.data,n=e;return n.data=r(o,t),n.attachments=t.length,{packet:n,buffers:t}},t.reconstructPacket=function(e,t){return e.data=n(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){function o(e,p,l){if(!e)return e;if(c&&e instanceof Blob||d&&e instanceof File){r++;var u=new FileReader;u.onload=function(){l?l[p]=this.result:n=this.result,--r||t(n)},u.readAsArrayBuffer(e)}else if(s(e))for(var y=0;y<e.length;y++)o(e[y],y,e);else if('object'==typeof e&&!a(e))for(var i in e)o(e[i],i,e)}var r=0,n=e;o(n),r||t(n)}}).call(t,o(0))},function(e,t,o){e.exports=o(30),e.exports.parser=o(3)},function(e,t,o){(function(t){function r(e,o){if(!(this instanceof r))return new r(e,o);o=o||{},e&&'object'==typeof e&&(o=e,e=null),e?(e=d(e),o.hostname=e.host,o.secure='https'===e.protocol||'wss'===e.protocol,o.port=e.port,e.query&&(o.query=e.query)):o.host&&(o.hostname=d(o.host).host),this.secure=null==o.secure?t.location&&'https:'===location.protocol:o.secure,o.hostname&&!o.port&&(o.port=this.secure?'443':'80'),this.agent=o.agent||!1,this.hostname=o.hostname||(t.location?location.hostname:'localhost'),this.port=o.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=o.query||{},'string'==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==o.upgrade,this.path=(o.path||'/engine.io').replace(/\/$/,'')+'/',this.forceJSONP=!!o.forceJSONP,this.jsonp=!1!==o.jsonp,this.forceBase64=!!o.forceBase64,this.enablesXDR=!!o.enablesXDR,this.timestampParam=o.timestampParam||'t',this.timestampRequests=o.timestampRequests,this.transports=o.transports||['polling','websocket'],this.transportOptions=o.transportOptions||{},this.readyState='',this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=o.policyPort||843,this.rememberUpgrade=o.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=o.onlyBinaryUpgrades,this.perMessageDeflate=!1!==o.perMessageDeflate&&(o.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=o.pfx||null,this.key=o.key||null,this.passphrase=o.passphrase||null,this.cert=o.cert||null,this.ca=o.ca||null,this.ciphers=o.ciphers||null,this.rejectUnauthorized=!(o.rejectUnauthorized!==void 0)||o.rejectUnauthorized,this.forceNode=!!o.forceNode;var n='object'==typeof t&&t;n.global===n&&(o.extraHeaders&&0<Object.keys(o.extraHeaders).length&&(this.extraHeaders=o.extraHeaders),o.localAddress&&(this.localAddress=o.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function n(e){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}var s=o(14),a=o(2),p=o(1)('engine.io-client:socket'),c=o(17),i=o(3),d=o(9),l=o(4);e.exports=r,r.priorWebsocketSuccess=!1,a(r.prototype),r.protocol=i.protocol,r.Socket=r,r.Transport=o(8),r.transports=o(14),r.parser=o(3),r.prototype.createTransport=function(e){p('creating transport "%s"',e);var t=n(this.query);t.EIO=i.protocol,t.transport=e;var o=this.transportOptions[e]||{};this.id&&(t.sid=this.id);var r=new s[e]({query:t,socket:this,agent:o.agent||this.agent,hostname:o.hostname||this.hostname,port:o.port||this.port,secure:o.secure||this.secure,path:o.path||this.path,forceJSONP:o.forceJSONP||this.forceJSONP,jsonp:o.jsonp||this.jsonp,forceBase64:o.forceBase64||this.forceBase64,enablesXDR:o.enablesXDR||this.enablesXDR,timestampRequests:o.timestampRequests||this.timestampRequests,timestampParam:o.timestampParam||this.timestampParam,policyPort:o.policyPort||this.policyPort,pfx:o.pfx||this.pfx,key:o.key||this.key,passphrase:o.passphrase||this.passphrase,cert:o.cert||this.cert,ca:o.ca||this.ca,ciphers:o.ciphers||this.ciphers,rejectUnauthorized:o.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:o.perMessageDeflate||this.perMessageDeflate,extraHeaders:o.extraHeaders||this.extraHeaders,forceNode:o.forceNode||this.forceNode,localAddress:o.localAddress||this.localAddress,requestTimeout:o.requestTimeout||this.requestTimeout,protocols:o.protocols||void 0});return r},r.prototype.open=function(){var e;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf('websocket'))e='websocket';else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit('error','No transports available')},0)}e=this.transports[0]}this.readyState='opening';try{e=this.createTransport(e)}catch(t){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},r.prototype.setTransport=function(e){p('setting transport %s',e.name);var t=this;this.transport&&(p('clearing existing transport %s',this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on('drain',function(){t.onDrain()}).on('packet',function(e){t.onPacket(e)}).on('error',function(o){t.onError(o)}).on('close',function(){t.onClose('transport close')})},r.prototype.probe=function(e){function t(){if(u.onlyBinaryUpgrades){var t=!this.supportsBinary&&u.transport.supportsBinary;l=l||t}l||(p('probe transport "%s" opened',e),d.send([{type:'ping',data:'probe'}]),d.once('packet',function(t){if(!l)if('pong'===t.type&&'probe'===t.data){if(p('probe transport "%s" pong',e),u.upgrading=!0,u.emit('upgrading',d),!d)return;r.priorWebsocketSuccess='websocket'===d.name,p('pausing current transport "%s"',u.transport.name),u.transport.pause(function(){l||'closed'===u.readyState||(p('changing transport and sending upgrade packet'),c(),u.setTransport(d),d.send([{type:'upgrade'}]),u.emit('upgrade',d),d=null,u.upgrading=!1,u.flush())})}else{p('probe transport "%s" failed',e);var o=new Error('probe error');o.transport=d.name,u.emit('upgradeError',o)}}))}function o(){l||(l=!0,c(),d.close(),d=null)}function n(t){var r=new Error('probe error: '+t);r.transport=d.name,o(),p('probe transport "%s" failed because of error: %s',e,t),u.emit('upgradeError',r)}function s(){n('transport closed')}function a(){n('socket closed')}function i(e){d&&e.name!==d.name&&(p('"%s" works - aborting "%s"',e.name,d.name),o())}function c(){d.removeListener('open',t),d.removeListener('error',n),d.removeListener('close',s),u.removeListener('close',a),u.removeListener('upgrading',i)}p('probing transport "%s"',e);var d=this.createTransport(e,{probe:1}),l=!1,u=this;r.priorWebsocketSuccess=!1,d.once('open',t),d.once('error',n),d.once('close',s),this.once('close',a),this.once('upgrading',i),d.open()},r.prototype.onOpen=function(){if(p('socket open'),this.readyState='open',r.priorWebsocketSuccess='websocket'===this.transport.name,this.emit('open'),this.flush(),'open'===this.readyState&&this.upgrade&&this.transport.pause){p('starting upgrade probes');for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},r.prototype.onPacket=function(e){if('opening'===this.readyState||'open'===this.readyState||'closing'===this.readyState)switch(p('socket receive: type "%s", data "%s"',e.type,e.data),this.emit('packet',e),this.emit('heartbeat'),e.type){case'open':this.onHandshake(JSON.parse(e.data));break;case'pong':this.setPing(),this.emit('pong');break;case'error':var t=new Error('server error');t.code=e.data,this.onError(t);break;case'message':this.emit('data',e.data),this.emit('message',e.data);}else p('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(e){this.emit('handshake',e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen();'closed'===this.readyState||(this.setPing(),this.removeListener('heartbeat',this.onHeartbeat),this.on('heartbeat',this.onHeartbeat))},r.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){'closed'===t.readyState||t.onClose('ping timeout')},e||t.pingInterval+t.pingTimeout)},r.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){p('writing ping packet - expecting pong within %sms',e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},r.prototype.ping=function(){var e=this;this.sendPacket('ping',function(){e.emit('ping')})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit('drain'):this.flush()},r.prototype.flush=function(){'closed'!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(p('flushing %d packets in socket',this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit('flush'))},r.prototype.write=r.prototype.send=function(e,t,o){return this.sendPacket('message',e,t,o),this},r.prototype.sendPacket=function(e,t,o,r){if('function'==typeof t&&(r=t,t=void 0),'function'==typeof o&&(r=o,o=null),'closing'!==this.readyState&&'closed'!==this.readyState){o=o||{},o.compress=!1!==o.compress;var n={type:e,data:t,options:o};this.emit('packetCreate',n),this.writeBuffer.push(n),r&&this.once('flush',r),this.flush()}},r.prototype.close=function(){function e(){r.onClose('forced close'),p('socket closing - telling transport to close'),r.transport.close()}function t(){r.removeListener('upgrade',t),r.removeListener('upgradeError',t),e()}function o(){r.once('upgrade',t),r.once('upgradeError',t)}if('opening'===this.readyState||'open'===this.readyState){this.readyState='closing';var r=this;this.writeBuffer.length?this.once('drain',function(){this.upgrading?o():e()}):this.upgrading?o():e()}return this},r.prototype.onError=function(e){p('socket error %j',e),r.priorWebsocketSuccess=!1,this.emit('error',e),this.onClose('transport error',e)},r.prototype.onClose=function(e,t){if('opening'===this.readyState||'open'===this.readyState||'closing'===this.readyState){p('socket close with reason: "%s"',e);var o=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners('close'),this.transport.close(),this.transport.removeAllListeners(),this.readyState='closed',this.id=null,this.emit('close',e,t),o.writeBuffer=[],o.prevBufferLen=0}},r.prototype.filterUpgrades=function(e){for(var t=[],o=0,r=e.length;o<r;o++)~c(this.transports,e[o])&&t.push(e[o]);return t}}).call(t,o(0))},function(e){try{e.exports='undefined'!=typeof XMLHttpRequest&&'withCredentials'in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,o){(function(t){function r(){}function n(e){if(i.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,t.location){var o='https:'===location.protocol,r=location.port;r||(r=o?443:80),this.xd=e.hostname!==t.location.hostname||r!==e.port,this.xs=e.secure!==o}}function s(e){this.method=e.method||'GET',this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0===e.data?null:e.data,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function a(){for(var e in s.requests)s.requests.hasOwnProperty(e)&&s.requests[e].abort()}var p=o(7),i=o(15),c=o(2),d=o(5),l=o(1)('engine.io-client:polling-xhr');e.exports=n,e.exports.Request=s,d(n,i),n.prototype.supportsBinary=!0,n.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new s(e)},n.prototype.doWrite=function(e,t){var o=this.request({method:'POST',data:e,isBinary:'string'!=typeof e&&e!==void 0}),r=this;o.on('success',t),o.on('error',function(e){r.onError('xhr post error',e)}),this.sendXhr=o},n.prototype.doPoll=function(){l('xhr poll');var e=this.request(),t=this;e.on('data',function(e){t.onData(e)}),e.on('error',function(e){t.onError('xhr poll error',e)}),this.pollXhr=e},c(s.prototype),s.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized},o=this.xhr=new p(e),r=this;try{l('xhr open %s: %s',this.method,this.uri),o.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var n in o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&o.setRequestHeader(n,this.extraHeaders[n])}catch(t){}if('POST'===this.method)try{this.isBinary?o.setRequestHeader('Content-type','application/octet-stream'):o.setRequestHeader('Content-type','text/plain;charset=UTF-8')}catch(t){}try{o.setRequestHeader('Accept','*/*')}catch(t){}'withCredentials'in o&&(o.withCredentials=!0),this.requestTimeout&&(o.timeout=this.requestTimeout),this.hasXDR()?(o.onload=function(){r.onLoad()},o.onerror=function(){r.onError(o.responseText)}):o.onreadystatechange=function(){if(2===o.readyState){var e;try{e=o.getResponseHeader('Content-Type')}catch(t){}'application/octet-stream'===e&&(o.responseType='arraybuffer')}4!==o.readyState||(200===o.status||1223===o.status?r.onLoad():setTimeout(function(){r.onError(o.status)},0))},l('xhr data %s',this.data),o.send(this.data)}catch(t){return void setTimeout(function(){r.onError(t)},0)}t.document&&(this.index=s.requestsCount++,s.requests[this.index]=this)},s.prototype.onSuccess=function(){this.emit('success'),this.cleanup()},s.prototype.onData=function(e){this.emit('data',e),this.onSuccess()},s.prototype.onError=function(e){this.emit('error',e),this.cleanup(!0)},s.prototype.cleanup=function(e){if('undefined'!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,e)try{this.xhr.abort()}catch(t){}t.document&&delete s.requests[this.index],this.xhr=null}},s.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader('Content-Type')}catch(t){}e='application/octet-stream'===t?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(t){this.onError(t)}null!=e&&this.onData(e)},s.prototype.hasXDR=function(){return'undefined'!=typeof t.XDomainRequest&&!this.xs&&this.enablesXDR},s.prototype.abort=function(){this.cleanup()},s.requestsCount=0,s.requests={},t.document&&(t.attachEvent?t.attachEvent('onunload',a):t.addEventListener&&t.addEventListener('beforeunload',a,!1))}).call(t,o(0))},function(e){e.exports=Object.keys||function(e){var t=[],o=Object.prototype.hasOwnProperty;for(var r in e)o.call(e,r)&&t.push(r);return t}},function(e){e.exports=function(e,t,o){var r=e.byteLength;if(t=t||0,o=o||r,e.slice)return e.slice(t,o);if(0>t&&(t+=r),0>o&&(o+=r),o>r&&(o=r),t>=r||t>=o||0===r)return new ArrayBuffer(0);for(var n=new Uint8Array(e),s=new Uint8Array(o-t),a=t,p=0;a<o;a++,p++)s[p]=n[a];return s.buffer}},function(e){function t(){}e.exports=function(e,o,r){function n(e,t){if(0>=n.count)throw new Error('after called too many times');--n.count,e?(s=!0,o(e),o=r):0===n.count&&!s&&o(null,t)}var s=!1;return r=r||t,n.count=e,0===e?o():n}},function(e,o,r){(function(e,n){var s;/*! https://mths.be/utf8js v2.1.2 by @mathias */(function(a){function p(e){for(var t,o,r=[],n=0,s=e.length;n<s;)t=e.charCodeAt(n++),55296<=t&&56319>=t&&n<s?(o=e.charCodeAt(n++),56320==(64512&o)?r.push(((1023&t)<<10)+(1023&o)+65536):(r.push(t),n--)):r.push(t);return r}function i(e){for(var t,o=e.length,r=-1,n='';++r<o;)t=e[r],65535<t&&(t-=65536,n+=k(55296|1023&t>>>10),t=56320|1023&t),n+=k(t);return n}function c(e,t){if(55296<=e&&57343>=e){if(t)throw Error('Lone surrogate U+'+e.toString(16).toUpperCase()+' is not a scalar value');return!1}return!0}function d(e,t){return k(128|63&e>>t)}function l(e,t){if(0==(4294967168&e))return k(e);var o='';return 0==(4294965248&e)?o=k(192|31&e>>6):0==(4294901760&e)?(!c(e,t)&&(e=65533),o=k(224|15&e>>12),o+=d(e,6)):0==(4292870144&e)&&(o=k(240|7&e>>18),o+=d(e,12),o+=d(e,6)),o+=k(128|63&e),o}function u(){if(b>=g)throw Error('Invalid byte index');var e=255&m[b];if(b++,128==(192&e))return 63&e;throw Error('Invalid continuation byte')}function y(e){var t,o,r,n,s;if(b>g)throw Error('Invalid byte index');if(b==g)return!1;if(t=255&m[b],b++,0==(128&t))return t;if(192==(224&t)){if(o=u(),s=(31&t)<<6|o,128<=s)return s;throw Error('Invalid continuation byte')}if(224==(240&t)){if(o=u(),r=u(),s=(15&t)<<12|o<<6|r,2048<=s)return c(s,e)?s:65533;throw Error('Invalid continuation byte')}if(240==(248&t)&&(o=u(),r=u(),n=u(),s=(7&t)<<18|o<<12|r<<6|n,65536<=s&&1114111>=s))return s;throw Error('Invalid UTF-8 detected')}var f='object'==typeof e&&e&&e.exports==('object'==typeof o&&o)&&e,h='object'==typeof n&&n;(h.global===h||h.window===h)&&(a=h);var m,g,b,k=t,x={version:'2.1.2',encode:function(e,t){t=t||{};for(var o,r=!1!==t.strict,n=p(e),s=n.length,a=-1,i='';++a<s;)o=n[a],i+=l(o,r);return i},decode:function(e,t){t=t||{};var o=!1!==t.strict;m=p(e),g=m.length,b=0;for(var r,n=[];!1!==(r=y(o));)n.push(r);return i(n)}};s=function(){return x}.call(o,r,o,e),!(void 0!==s&&(e.exports=s))})(this)}).call(o,r(37)(e),r(0))},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],!e.children&&(e.children=[]),Object.defineProperty(e,'loaded',{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,'id',{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(){'use strict';for(var e='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',o=new Uint8Array(256),r=0;r<e.length;r++)o[e.charCodeAt(r)]=r;t.encode=function(t){var o,r=new Uint8Array(t),n=r.length,s='';for(o=0;o<n;o+=3)s+=e[r[o]>>2],s+=e[(3&r[o])<<4|r[o+1]>>4],s+=e[(15&r[o+1])<<2|r[o+2]>>6],s+=e[63&r[o+2]];return 2==n%3?s=s.substring(0,s.length-1)+'=':1==n%3&&(s=s.substring(0,s.length-2)+'=='),s},t.decode=function(e){var t,r,n,s,a,i=0.75*e.length,c=e.length,d=0;'='===e[e.length-1]&&(i--,'='===e[e.length-2]&&i--);var p=new ArrayBuffer(i),l=new Uint8Array(p);for(t=0;t<c;t+=4)r=o[e.charCodeAt(t)],n=o[e.charCodeAt(t+1)],s=o[e.charCodeAt(t+2)],a=o[e.charCodeAt(t+3)],l[d++]=r<<2|n>>4,l[d++]=(15&n)<<4|s>>2,l[d++]=(3&s)<<6|63&a;return p}})()},function(e,t,o){(function(t){function o(e){for(var t,o=0;o<e.length;o++)if(t=e[o],t.buffer instanceof ArrayBuffer){var r=t.buffer;if(t.byteLength!==r.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(r,t.byteOffset,t.byteLength)),r=n.buffer}e[o]=r}}function r(e,t){t=t||{};var r=new s;o(e);for(var n=0;n<e.length;n++)r.append(e[n]);return t.type?r.getBlob(t.type):r.getBlob()}function n(e,t){return o(e),new Blob(e,t||{})}var s=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,a=function(){try{var e=new Blob(['hi']);return 2===e.size}catch(t){return!1}}(),p=a&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),i=s&&s.prototype.append&&s.prototype.getBlob;e.exports=function(){return a?p?t.Blob:n:i?r:void 0}()}).call(t,o(0))},function(e,t,o){(function(t){function r(){}function n(e){s.call(this,e),this.query=this.query||{},p||(!t.___eio&&(t.___eio=[]),p=t.___eio),this.index=p.length;var o=this;p.push(function(e){o.onData(e)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener('beforeunload',function(){o.script&&(o.script.onerror=r)},!1)}var s=o(15),a=o(5);e.exports=n;var p,i=/\n/g,c=/\\n/g;a(n,s),n.prototype.supportsBinary=!1,n.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),s.prototype.doClose.call(this)},n.prototype.doPoll=function(){var t=this,e=document.createElement('script');this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(o){t.onError('jsonp poll error',o)};var o=document.getElementsByTagName('script')[0];o?o.parentNode.insertBefore(e,o):(document.head||document.body).appendChild(e),this.script=e;var r='undefined'!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement('iframe');document.body.appendChild(e),document.body.removeChild(e)},100)},n.prototype.doWrite=function(e,t){function o(){r(),t()}function r(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError('jsonp polling iframe removal error',t)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';s=document.createElement(e)}catch(t){s=document.createElement('iframe'),s.name=n.iframeId,s.src='javascript:0'}s.id=n.iframeId,n.form.appendChild(s),n.iframe=s}var n=this;if(!this.form){var s,a=document.createElement('form'),p=document.createElement('textarea'),d=this.iframeId='eio_iframe_'+this.index;a.className='socketio',a.style.position='absolute',a.style.top='-1000px',a.style.left='-1000px',a.target=d,a.method='POST',a.setAttribute('accept-charset','utf-8'),p.name='d',a.appendChild(p),document.body.appendChild(a),this.form=a,this.area=p}this.form.action=this.uri(),r(),e=e.replace(c,'\\\n'),this.area.value=e.replace(i,'\\n');try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){'complete'===n.iframe.readyState&&o()}:this.iframe.onload=o}}).call(t,o(0))},function(e,t,o){(function(t){function r(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=l&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(u=n),s.call(this,e)}var n,s=o(8),a=o(3),p=o(4),i=o(5),c=o(16),d=o(1)('engine.io-client:websocket'),l=t.WebSocket||t.MozWebSocket;if('undefined'==typeof window)try{n=o(42)}catch(t){}var u=l;u||'undefined'!=typeof window||(u=n),e.exports=r,i(r,s),r.prototype.name='websocket',r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,o={agent:this.agent,perMessageDeflate:this.perMessageDeflate};o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(o.headers=this.extraHeaders),this.localAddress&&(o.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?t?new u(e,t):new u(e):new u(e,t,o)}catch(e){return this.emit('error',e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType='nodebuffer'):this.ws.binaryType='arraybuffer',this.addEventListeners()}},r.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(o){t.onError('websocket error',o)}},r.prototype.write=function(e){function o(){r.emit('flush'),setTimeout(function(){r.writable=!0,r.emit('drain')},0)}var r=this;this.writable=!1;for(var n=e.length,s=0,p=n;s<p;s++)(function(e){a.encodePacket(e,r.supportsBinary,function(s){if(!r.usingBrowserWebSocket){var a={};if(e.options&&(a.compress=e.options.compress),r.perMessageDeflate){var p='string'==typeof s?t.Buffer.byteLength(s):s.length;p<r.perMessageDeflate.threshold&&(a.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(s):r.ws.send(s,a)}catch(t){d('websocket closed before onclose event')}--n||o()})})(e[s])},r.prototype.onClose=function(){s.prototype.onClose.call(this)},r.prototype.doClose=function(){'undefined'!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?'wss':'ws',o='';this.port&&('wss'==t&&443!==+this.port||'ws'==t&&80!==+this.port)&&(o=':'+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),e=p.encode(e),e.length&&(e='?'+e);var r=-1!==this.hostname.indexOf(':');return t+'://'+(r?'['+this.hostname+']':this.hostname)+o+this.path+e},r.prototype.check=function(){return!!u&&!('__initialize'in u&&this.name===r.prototype.name)}}).call(t,o(0))},function(){},function(e){e.exports=function(e,t){var o=[];t=t||0;for(var r=t||0;r<e.length;r++)o[r-t]=e[r];return o}},function(t){function o(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&1>=e.jitter?e.jitter:0,this.attempts=0}t.exports=o,o.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var o=Math.random(),r=e(o*this.jitter*t);t=0==(1&e(10*o))?t-r:t+r}return 0|Math.min(t,this.max)},o.prototype.reset=function(){this.attempts=0},o.prototype.setMin=function(e){this.ms=e},o.prototype.setMax=function(e){this.max=e},o.prototype.setJitter=function(e){this.jitter=e}},function(e,t,o){function r(){}function n(e){if(!h(e))return e;var t=[];for(var o in e)s(t,o,e[o]);return t.join('&')}function s(e,t,o){if(!(null!=o))null===o&&e.push(encodeURIComponent(t));else if(Array.isArray(o))o.forEach(function(o){s(e,t,o)});else if(h(o))for(var r in o)s(e,t+'['+r+']',o[r]);else e.push(encodeURIComponent(t)+'='+encodeURIComponent(o))}function a(e){for(var t,o,r={},n=e.split('&'),s=0,a=n.length;s<a;++s)t=n[s],o=t.indexOf('='),-1==o?r[decodeURIComponent(t)]='':r[decodeURIComponent(t.slice(0,o))]=decodeURIComponent(t.slice(o+1));return r}function p(e){for(var t,o,r,n,s=e.split(/\r?\n/),a={},p=0,i=s.length;p<i;++p)(o=s[p],t=o.indexOf(':'),-1!==t)&&(r=o.slice(0,t).toLowerCase(),n=k(o.slice(t+1)),a[r]=n);return a}function i(e){return /[\/+]json\b/.test(e)}function c(e){this.req=e,this.xhr=this.req.xhr,this.text='HEAD'!=this.req.method&&(''===this.xhr.responseType||'text'===this.xhr.responseType)||'undefined'==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=p(this.xhr.getAllResponseHeaders()),this.header['content-type']=this.xhr.getResponseHeader('content-type'),this._setHeaderProperties(this.header),this.body=null===this.text&&e._responseType?this.xhr.response:'HEAD'==this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function d(e,t){var o=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on('end',function(){var t=null,e=null;try{e=new c(o)}catch(r){return t=new Error('Parser is unable to parse the response'),t.parse=!0,t.original=r,o.xhr?(t.rawResponse='undefined'==typeof o.xhr.responseType?o.xhr.responseText:o.xhr.response,t.status=o.xhr.status?o.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),o.callback(t)}o.emit('response',e);var r;try{o._isResponseOK(e)||(r=new Error(e.statusText||'Unsuccessful HTTP response'))}catch(e){r=e}r?(r.original=t,r.response=e,r.status=e.status,o.callback(r,e)):o.callback(null,e)})}function l(e,t,o){var r=b('DELETE',e);return'function'==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r}var u;'undefined'==typeof window?'undefined'==typeof self?(console.warn('Using browser-only version of superagent in non-browser environment'),u=this):u=self:u=window;var y=o(2),f=o(46),h=o(21),m=o(47),g=o(49);var b=t=e.exports=function(e,o){return'function'==typeof o?new t.Request('GET',e).end(o):1==arguments.length?new t.Request('GET',e):new t.Request(e,o)};t.Request=d,b.getXHR=function(){if(u.XMLHttpRequest&&(!u.location||'file:'!=u.location.protocol||!u.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject('Microsoft.XMLHTTP')}catch(t){}try{return new ActiveXObject('Msxml2.XMLHTTP.6.0')}catch(t){}try{return new ActiveXObject('Msxml2.XMLHTTP.3.0')}catch(t){}try{return new ActiveXObject('Msxml2.XMLHTTP')}catch(t){}throw Error('Browser-only version of superagent could not find XHR')};var k=function(e){return e.trim()};b.serializeObject=n,b.parseString=a,b.types={html:'text/html',json:'application/json',xml:'text/xml',urlencoded:'application/x-www-form-urlencoded',form:'application/x-www-form-urlencoded',"form-data":'application/x-www-form-urlencoded'},b.serialize={"application/x-www-form-urlencoded":n,"application/json":JSON.stringify},b.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},m(c.prototype),c.prototype._parseBody=function(e){var t=b.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&i(this.type)&&(t=b.parse['application/json']),t&&e&&(e.length||e instanceof Object)?t(e):null)},c.prototype.toError=function(){var e=this.req,t=e.method,o=e.url,r='cannot '+t+' '+o+' ('+this.status+')',n=new Error(r);return n.status=this.status,n.method=t,n.url=o,n},b.Response=c,y(d.prototype),f(d.prototype),d.prototype.type=function(e){return this.set('Content-Type',b.types[e]||e),this},d.prototype.accept=function(e){return this.set('Accept',b.types[e]||e),this},d.prototype.auth=function(e,t,o){1===arguments.length&&(t=''),'object'==typeof t&&null!==t&&(o=t,t=''),o||(o={type:'function'==typeof btoa?'basic':'auto'});return this._auth(e,t,o,function(e){if('function'==typeof btoa)return btoa(e);throw new Error('Cannot use basic auth, btoa is not a function')})},d.prototype.query=function(e){return'string'!=typeof e&&(e=n(e)),e&&this._query.push(e),this},d.prototype.attach=function(e,t,o){if(t){if(this._data)throw Error('superagent can\'t mix .send() and .attach()');this._getFormData().append(e,t,o||t.name)}return this},d.prototype._getFormData=function(){return this._formData||(this._formData=new u.FormData),this._formData},d.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var o=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit('error',e)),o(e,t)},d.prototype.crossDomainError=function(){var e=new Error('Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},d.prototype.buffer=d.prototype.ca=d.prototype.agent=function(){return console.warn('This is not supported in browser version of superagent'),this},d.prototype.pipe=d.prototype.write=function(){throw Error('Streaming is not supported in browser version of superagent')},d.prototype._isHost=function(e){return e&&'object'==typeof e&&!Array.isArray(e)&&'[object Object]'!==Object.prototype.toString.call(e)},d.prototype.end=function(e){return this._endCalled&&console.warn('Warning: .end() was called twice. This is not supported in superagent'),this._endCalled=!0,this._callback=e||r,this._finalizeQueryString(),this._end()},d.prototype._end=function(){var t=this,e=this.xhr=b.getXHR(),o=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var o=e.readyState;if(2<=o&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4==o){var r;try{r=e.status}catch(t){r=0}return r?void t.emit('end'):t.timedout||t._aborted?void 0:t.crossDomainError()}};var r=function(o,r){0<r.total&&(r.percent=100*(r.loaded/r.total)),r.direction=o,t.emit('progress',r)};if(this.hasListeners('progress'))try{e.onprogress=r.bind(null,'download'),e.upload&&(e.upload.onprogress=r.bind(null,'upload'))}catch(t){}try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&'GET'!=this.method&&'HEAD'!=this.method&&'string'!=typeof o&&!this._isHost(o)){var n=this._header['content-type'],s=this._serializer||b.serialize[n?n.split(';')[0]:''];!s&&i(n)&&(s=b.serialize['application/json']),s&&(o=s(o))}for(var a in this.header)null!=this.header[a]&&this.header.hasOwnProperty(a)&&e.setRequestHeader(a,this.header[a]);return this._responseType&&(e.responseType=this._responseType),this.emit('request',this),e.send('undefined'==typeof o?null:o),this},b.agent=function(){return new g},['GET','POST','OPTIONS','PATCH','PUT','DELETE'].forEach(function(e){g.prototype[e.toLowerCase()]=function(t,o){var r=new b.Request(e,t);return this._setDefaults(r),o&&r.end(o),r}}),g.prototype.del=g.prototype['delete'],b.get=function(e,t,o){var r=b('GET',e);return'function'==typeof t&&(o=t,t=null),t&&r.query(t),o&&r.end(o),r},b.head=function(e,t,o){var r=b('HEAD',e);return'function'==typeof t&&(o=t,t=null),t&&r.query(t),o&&r.end(o),r},b.options=function(e,t,o){var r=b('OPTIONS',e);return'function'==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r},b.del=l,b['delete']=l,b.patch=function(e,t,o){var r=b('PATCH',e);return'function'==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r},b.post=function(e,t,o){var r=b('POST',e);return'function'==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r},b.put=function(e,t,o){var r=b('PUT',e);return'function'==typeof t&&(o=t,t=null),t&&r.send(t),o&&r.end(o),r}},function(e,t,o){'use strict';function r(e){if(e)return n(e)}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}var s=o(21);e.exports=r,r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},r.prototype.parse=function(e){return this._parser=e,this},r.prototype.responseType=function(e){return this._responseType=e,this},r.prototype.serialize=function(e){return this._serializer=e,this},r.prototype.timeout=function(e){if(!e||'object'!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)'deadline'===t?this._timeout=e.deadline:'response'===t?this._responseTimeout=e.response:console.warn('Unknown timeout option',t);return this},r.prototype.retry=function(e,t){return(0===arguments.length||!0===e)&&(e=1),0>=e&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var a=['ECONNRESET','ETIMEDOUT','EADDRINFO','ESOCKETTIMEDOUT'];r.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var o=this._retryCallback(e,t);if(!0===o)return!0;if(!1===o)return!1}catch(t){console.error(t)}if(t&&t.status&&500<=t.status&&501!=t.status)return!0;if(e){if(e.code&&~a.indexOf(e.code))return!0;if(e.timeout&&'ECONNABORTED'==e.code)return!0;if(e.crossDomain)return!0}return!1},r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},r.prototype.then=function(e,t){if(!this._fullfilledPromise){var o=this;this._endCalled&&console.warn('Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises'),this._fullfilledPromise=new Promise(function(e,t){o.end(function(o,r){o?t(o):e(r)})})}return this._fullfilledPromise.then(e,t)},r.prototype.catch=function(e){return this.then(void 0,e)},r.prototype.use=function(e){return e(this),this},r.prototype.ok=function(e){if('function'!=typeof e)throw Error('Callback required');return this._okCallback=e,this},r.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):200<=e.status&&300>e.status)},r.prototype.get=function(e){return this._header[e.toLowerCase()]},r.prototype.getHeader=r.prototype.get,r.prototype.set=function(e,t){if(s(e)){for(var o in e)this.set(o,e[o]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},r.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},r.prototype.field=function(e,t){if(null===e||void 0===e)throw new Error('.field(name, val) name can not be empty');if(this._data&&console.error('.field() can\'t be used if .send() is used. Please use only .send() or only .field() & .attach()'),s(e)){for(var o in e)this.field(o,e[o]);return this}if(Array.isArray(t)){for(var r in t)this.field(e,t[r]);return this}if(null===t||void 0===t)throw new Error('.field(name, val) val can not be empty');return'boolean'==typeof t&&(t=''+t),this._getFormData().append(e,t),this},r.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit('abort'),this)},r.prototype._auth=function(e,t,o,r){switch(o.type){case'basic':this.set('Authorization','Basic '+r(e+':'+t));break;case'auto':this.username=e,this.password=t;break;case'bearer':this.set('Authorization','Bearer '+e);}return this},r.prototype.withCredentials=function(e){return void 0==e&&(e=!0),this._withCredentials=e,this},r.prototype.redirects=function(e){return this._maxRedirects=e,this},r.prototype.maxResponseSize=function(e){if('number'!=typeof e)throw TypeError('Invalid argument');return this._maxResponseSize=e,this},r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},r.prototype.send=function(e){var t=s(e),o=this._header['content-type'];if(this._formData&&console.error('.send() can\'t be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()'),t&&!this._data)Array.isArray(e)?this._data=[]:!this._isHost(e)&&(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error('Can\'t merge these send calls');if(t&&s(this._data))for(var r in e)this._data[r]=e[r];else'string'==typeof e?(o||this.type('form'),o=this._header['content-type'],this._data='application/x-www-form-urlencoded'==o?this._data?this._data+'&'+e:e:(this._data||'')+e):this._data=e;return!t||this._isHost(e)?this:(o||this.type('json'),this)},r.prototype.sortQuery=function(e){return this._sort='undefined'==typeof e||e,this},r.prototype._finalizeQueryString=function(){var e=this._query.join('&');if(e&&(this.url+=(0<=this.url.indexOf('?')?'&':'?')+e),this._query.length=0,this._sort){var t=this.url.indexOf('?');if(0<=t){var o=this.url.substring(t+1).split('&');'function'==typeof this._sort?o.sort(this._sort):o.sort(),this.url=this.url.substring(0,t)+'?'+o.join('&')}}},r.prototype._appendQueryString=function(){console.trace('Unsupported')},r.prototype._timeoutError=function(e,t,o){if(!this._aborted){var r=new Error(e+t+'ms exceeded');r.timeout=t,r.code='ECONNABORTED',r.errno=o,this.timedout=!0,this.abort(),this.callback(r)}},r.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError('Timeout of ',e._timeout,'ETIME')},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError('Response timeout of ',e._responseTimeout,'ETIMEDOUT')},this._responseTimeout))}},function(e,t,o){'use strict';function r(e){if(e)return n(e)}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}var s=o(48);e.exports=r,r.prototype.get=function(e){return this.header[e.toLowerCase()]},r.prototype._setHeaderProperties=function(e){var t=e['content-type']||'';this.type=s.type(t);var o=s.params(t);for(var r in o)this[r]=o[r];this.links={};try{e.link&&(this.links=s.parseLinks(e.link))}catch(e){}},r.prototype._setStatusProperties=function(e){var t=0|e/100;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e}},function(e,t){'use strict';t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce(function(e,t){var o=t.split(/ *= */),r=o.shift(),n=o.shift();return r&&n&&(e[r]=n),e},{})},t.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var o=t.split(/ *; */),r=o[0].slice(1,-1),n=o[1].split(/ *= */)[1].slice(1,-1);return e[n]=r,e},{})},t.cleanHeader=function(e,t){return delete e['content-type'],delete e['content-length'],delete e['transfer-encoding'],delete e.host,t&&delete e.cookie,e}},function(e){function t(){this._defaults=[]}['use','on','once','set','query','type','accept','auth','withCredentials','sortQuery','retry','ok','redirects','timeout','buffer','serialize','parse','ca','key','pfx','cert'].forEach(function(e){t.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),t.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},e.exports=t},function(e){e.exports=class{constructor(e,t,o,r,n){this.io=e,this.appId=t,this.userIdentity=o,this.friendIdentity=r,this.connectionId=n}onNewMessage(e){this.io.on(`${this.connectionId}-message-added`,(t)=>e(t))}send(e){this.io.emit(`${this.connectionId}-new-message`,e)}}}])});